<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Produk Haji & Umroh</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <header>
        <h1>Produk Khusus Haji & Umroh</h1>
        <p>Kebutuhan ibadah Anda yang lebih nyaman dan praktis</p>
    </header>

    <div class="products" id="product-container">
        <!-- Products will be loaded here by JavaScript -->
    </div>

    <footer>
        <p>&copy; <span id="year"></span> Toko Produk Haji & Umroh</p>
    </footer>

    <script>
        // Auto-update year
        document.getElementById('year').textContent = new Date().getFullYear();
        
        // Load products from CSV
        fetch('products/produk.csv')
            .then(response => response.text())
            .then(csvText => {
                const products = csvToArray(csvText);
                displayProducts(products);
            });

        function csvToArray(csv) {
            const lines = csv.split('\n');
            const headers = lines[0].split(',');
            return lines.slice(1).map(line => {
                const values = line.split(/,(?=(?:(?:[^"]*"){2})*[^"]*$)/);
                return headers.reduce((obj, header, i) => {
                    header = header.trim();
                    let value = values[i] ? values[i].trim() : '';
                    if (value.startsWith('"') && value.endsWith('"')) {
                        value = value.slice(1, -1);
                    }
                    obj[header] = value;
                    return obj;
                }, {});
            });
        }

        function formatRupiah(amount) {
            return 'Rp' + parseInt(amount).toLocaleString('id-ID');
        }

        function displayProducts(products) {
            const container = document.getElementById('product-container');
            container.innerHTML = products.map(product => `
                <div class="product">
                    <img src="${product.image}" alt="${product.title}" loading="lazy">
                    <div class="product-info">
                        <h2>${product.title}</h2>
                        <div class="price">${formatRupiah(product.price)}</div>
                        <p class="description">${product.description}</p>
                    </div>
                </div>
            `).join('');
        }
    </script>
</body>
</html>
